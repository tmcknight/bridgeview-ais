@import "tailwindcss";

@variant dark (&:is(.dark, .dark *));

/* ===== Global base styles ===== */
@layer base {
  :root {
    font-family:
      "Inter",
      system-ui,
      -apple-system,
      sans-serif;
    font-synthesis: none;
    text-rendering: optimizeLegibility;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }

  body {
    @apply m-0 min-w-80 min-h-screen flex flex-col bg-white dark:bg-slate-900 text-slate-800 dark:text-slate-200 leading-normal;
  }

  #root {
    @apply w-full h-screen flex flex-col;
  }

  a {
    @apply text-blue-500 no-underline hover:underline;
  }

  button {
    @apply font-[inherit] cursor-pointer;
  }

  h1,
  h2,
  h3 {
    @apply leading-tight;
  }
}

/* ===== MapLibre overrides (rendered outside React) ===== */

/* Marker styles */
.ship-marker {
  @apply cursor-pointer;
  background: none !important;
  border: none !important;
}

.bridge-marker {
  @apply cursor-pointer;
  background: none !important;
  border: none !important;
}

/* Selected ship pulse animation */
.selected-ship-marker {
  z-index: 1000 !important;
}

.selected-ship-marker .ship-marker {
  animation: pulse-selected 1.5s ease-in-out infinite;
}

@keyframes pulse-selected {
  0%,
  100% {
    transform: scale(1.1);
    filter: drop-shadow(0 0 12px rgba(59, 130, 246, 0.8))
      drop-shadow(0 0 24px rgba(59, 130, 246, 0.4));
  }
  50% {
    transform: scale(1.4);
    filter: drop-shadow(0 0 20px rgba(59, 130, 246, 1))
      drop-shadow(0 0 40px rgba(59, 130, 246, 0.6))
      drop-shadow(0 0 60px rgba(59, 130, 246, 0.3));
  }
}

.bridge-icon {
  @apply text-2xl;
  filter: drop-shadow(0 1px 2px rgba(0, 0, 0, 0.5));
}

/* Popup styles */
.maplibregl-popup-content {
  @apply bg-slate-50! dark:bg-slate-200! rounded-md! px-2! py-1.5!;
}
.maplibregl-popup-tip {
  @apply border-t-slate-50! dark:border-t-slate-200!;
}

.maplibregl-popup-close-button {
  @apply text-slate-500 dark:text-slate-500;
}

.maplibregl-popup-close-button:hover {
  @apply bg-slate-100 dark:bg-slate-100 text-slate-800 dark:text-slate-800;
}

/* Zoom control group */
.maplibregl-ctrl-group {
  @apply rounded!;
  border: 1px solid #cbd5e1 !important;
}

.dark .maplibregl-ctrl-group {
  border: 1px solid #94a3b8 !important;
}

.maplibregl-ctrl-group:not(:empty) {
  @apply shadow-lg!;
  background: none !important;
}

/* Zoom controls */
.maplibregl-ctrl-zoom-in,
.maplibregl-ctrl-zoom-out {
  width: 29px !important;
  height: 29px !important;
  background: #f1f5f9 !important;
  border: none !important;
}

.dark .maplibregl-ctrl-zoom-in,
.dark .maplibregl-ctrl-zoom-out {
  background: #475569 !important;
}

.maplibregl-ctrl-zoom-in {
  @apply rounded-t!;
  border-bottom: 1px solid #cbd5e1 !important;
}

.dark .maplibregl-ctrl-zoom-in {
  border-bottom: 1px solid #94a3b8 !important;
}

.maplibregl-ctrl-zoom-out {
  @apply rounded-b!;
}

/* Override MapLibre's default icons with Heroicon-style SVGs */
.maplibregl-ctrl-zoom-in .maplibregl-ctrl-icon {
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%23334155' stroke-width='2.5' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M12 4.5v15m7.5-7.5h-15'/%3E%3C/svg%3E") !important;
  background-repeat: no-repeat !important;
  background-position: center !important;
  background-size: 50% !important;
}

.dark .maplibregl-ctrl-zoom-in .maplibregl-ctrl-icon {
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='white' stroke-width='2.5' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M12 4.5v15m7.5-7.5h-15'/%3E%3C/svg%3E") !important;
}

.maplibregl-ctrl-zoom-out .maplibregl-ctrl-icon {
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%23334155' stroke-width='2.5' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M19.5 12h-15'/%3E%3C/svg%3E") !important;
  background-repeat: no-repeat !important;
  background-position: center !important;
  background-size: 50% !important;
}

.dark .maplibregl-ctrl-zoom-out .maplibregl-ctrl-icon {
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='white' stroke-width='2.5' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M19.5 12h-15'/%3E%3C/svg%3E") !important;
}

.maplibregl-ctrl-zoom-in:hover,
.maplibregl-ctrl-zoom-out:hover {
  background: #cbd5e1 !important;
}

.dark .maplibregl-ctrl-zoom-in:hover,
.dark .maplibregl-ctrl-zoom-out:hover {
  background: #64748b !important;
}

/* Attribution controls */
.maplibregl-ctrl-attrib {
  background: rgba(255, 255, 255, 0.7) !important;
}

.dark .maplibregl-ctrl-attrib {
  background: rgba(15, 23, 42, 0.7) !important;
}

.maplibregl-ctrl-attrib a {
  color: #64748b !important;
}

.dark .maplibregl-ctrl-attrib a {
  color: #64748b !important;
}

.maplibregl-ctrl-attrib-button {
  background: rgba(255, 255, 255, 0.7) !important;
  color: #334155 !important;
  border-color: #cbd5e1 !important;
}

.dark .maplibregl-ctrl-attrib-button {
  background: rgba(15, 23, 42, 0.7) !important;
  color: #cbd5e1 !important;
  border-color: #334155 !important;
}

.maplibregl-ctrl-attrib-button:hover {
  background: #cbd5e1 !important;
}

.dark .maplibregl-ctrl-attrib-button:hover {
  background: #334155 !important;
}
